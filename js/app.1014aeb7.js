(function(t){function e(e){for(var n,s,o=e[0],h=e[1],l=e[2],u=0,v=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);c&&c(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var h=i[o];0!==a[h]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=h;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"223b":function(t,e,i){t.exports=i.p+"img/machine.4e88f3ed.svg"},"27d6":function(t,e,i){t.exports=i.p+"img/reference.970f391a.svg"},"2c96":function(t,e,i){t.exports=i.p+"img/requirement.2077a9ae.svg"},a392:function(t,e,i){t.exports=i.p+"img/interface.f096cb82.svg"},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n,a,r=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-navigation-drawer",{attrs:{app:"",clipped:"",permanent:"",right:"",width:"400"},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[i("v-list",{staticClass:"body-2",attrs:{dense:"",expand:""}},[i("v-list-group",{attrs:{value:"true",disabled:""},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[t._v("Process of scenario based projection")])]},proxy:!0}])},[i("v-list-group",{attrs:{"sub-group":"","no-action":"",disabled:"",value:"2"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",{attrs:{"input-value":1===t.activeStep}},[t._v("Step 1: Draw the context diagram")])]},proxy:!0}]),model:{value:t.tmp,callback:function(e){t.tmp=e},expression:"tmp"}},[i("v-list-item",{attrs:{"input-value":1===t.activeStep&&1===t.subStep}},[i("v-list-item-action",[t._v("1.1: Designate machine.")])],1),i("v-list-item",{attrs:{"input-value":1===t.activeStep&&2===t.subStep}},[i("v-list-item-action",[t._v("1.2: Identify domains.")])],1),i("v-list-item",{attrs:{"input-value":1===t.activeStep&&3===t.subStep}},[i("v-list-item-action",[t._v("1.3: Identify interactions.")])],1),i("v-list-item",{attrs:{"input-value":1===t.activeStep&&4===t.subStep}},[i("v-list-item-action",[t._v("1.4: Check context diagram.")])],1)],1),i("v-list-group",{attrs:{value:"true","sub-group":"","no-action":"",disabled:""},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",{attrs:{"input-value":2===t.activeStep}},[t._v("Step 2: Draw the problem diagram")])]},proxy:!0}])},[i("v-list-item",{attrs:{"input-value":2===t.activeStep&&1===t.subStep}},[i("v-list-item-action",[t._v("2.1: Identity requirements.")])],1),i("v-list-item",{attrs:{"input-value":2===t.activeStep&&2===t.subStep}},[i("v-list-item-action",[t._v("2.2: Identify references.")])],1),i("v-list-item",{attrs:{"input-value":2===t.activeStep&&3===t.subStep}},[i("v-list-item-action",[t._v("2.3: Check problem diagram.")])],1)],1)],1),i("v-container",[i("v-row",{attrs:{align:"center",justify:"space-around"}},[i("v-btn",{attrs:{color:"deep-purple darken-1",dark:""},on:{click:t.back}},[t._v("BACK")]),i("v-btn",{attrs:{color:"deep-purple darken-1",dark:""},on:{click:t.next}},[t._v("NEXT")])],1)],1),i("v-list-group",{attrs:{value:"true","no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[t._v("Diagram")])]},proxy:!0}])},[i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(this.projectDescription))])],1)],1),i("v-list-item",[t._v(" context Diagram ")]),i("v-list-item",[t._v(" problem Diagram ")])],1),i("v-list-group",{attrs:{value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[t._v("Phenomenon")])]},proxy:!0}])},[i("v-list-item",[i("v-simple-table",{staticStyle:{width:"100%"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Name")]),i("th",{staticClass:"text-left"},[t._v("Description")]),i("th",{staticClass:"text-left"},[t._v("PheType")])])]),i("tbody",t._l(t.phenomenons,(function(e){return i("tr",{key:e.name},[i("td",[t._v("phe"+t._s(e.name))]),i("td",[t._v(t._s(e.description))]),i("td",[t._v(t._s(t.phenomenonName[e.type]))])])})),0)]},proxy:!0}])})],1)],1),i("v-list-group",{attrs:{value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[t._v("Interaction")])]},proxy:!0}])},[i("v-list-item",[i("v-simple-table",{staticStyle:{width:"100%"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Name")]),i("th",{staticClass:"text-left"},[t._v("Initiator")]),i("th",{staticClass:"text-left"},[t._v("Receiver")]),i("th",{staticClass:"text-left"},[t._v("Content")])])]),i("tbody",t._l(t.phenomenons,(function(e,n){return i("tr",{key:e.name},[i("td",[t._v("inter"+t._s(n+1))]),i("td",[t._v(t._s(e.initiator.description))]),i("td",[t._v(t._s(e.receiver.description))]),i("td",[t._v(t._s(e.description))])])})),0)]},proxy:!0}])})],1)],1),i("v-list-group",{staticStyle:{width:"100%"},attrs:{value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[t._v("Reference")])]},proxy:!0}])},[i("v-list-item",{staticStyle:{width:"100%"}},[i("v-simple-table",{staticStyle:{width:"100%"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Name")]),i("th",{staticClass:"text-left"},[t._v("Initiator")]),i("th",{staticClass:"text-left"},[t._v("Receiver")]),i("th",{staticClass:"text-left"},[t._v("Content")]),i("th",{staticClass:"text-left"},[t._v("Constraint")])])]),i("tbody",t._l(t.references,(function(e){return i("tr",{key:e.name},[i("td",[t._v("req"+t._s(e.name))]),i("td",[t._v(t._s(e.initiator))]),i("td",[t._v(t._s(e.receiver))]),i("td",[t._v(t._s(e.description))]),i("td",[t._v(t._s(e.constraint))])])})),0)]},proxy:!0}])})],1)],1),i("v-list-group",{attrs:{value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item",[t._v("Other Information")])]},proxy:!0}])})],1)],1),i("v-navigation-drawer",{attrs:{permanent:"","mini-variant":"",app:"",clipped:"",left:""},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[i("v-list",{attrs:{dense:""}},[i("v-list-item-group",{model:{value:t.activePen,callback:function(e){t.activePen=e},expression:"activePen"}},t._l(t.pens,(function(t){return i("v-list-item",{key:t.name,attrs:{title:t.name,disabled:!t.allow}},[i("v-list-item-action",[i("v-img",{attrs:{alt:t.name,width:".5em",src:t.src}})],1)],1)})),1)],1)],1),i("v-app-bar",{attrs:{app:"","clipped-right":"","clipped-left":"",color:"deep-purple darken-1",dark:""}},[i("v-toolbar-title",[t._v("Context Diagram")]),i("v-spacer"),i("v-dialog",{attrs:{persistent:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{text:"",dark:""}},n),[t._v("New")])]}}]),model:{value:t.newDialog,callback:function(e){t.newDialog=e},expression:"newDialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("New Project")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-text-field",{attrs:{label:"description"},model:{value:t.projectDescription,callback:function(e){t.projectDescription=e},expression:"projectDescription"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.newProject}},[t._v("Confirm")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.newDialog=!1}}},[t._v("Cancel")])],1)],1)],1),i("v-btn",{attrs:{text:""},on:{click:t.merge}},[t._v("Merge")]),i("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{text:""}},n),[t._v("Import")])]}}])},[i("v-list",[i("v-list-item",{on:{click:t.upload}},[i("v-list-item-title",[t._v("Import Project")])],1)],1)],1),i("v-dialog",{attrs:{width:"700px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{text:""}},n),[t._v("Custom")])]}}])},[i("v-card",[i("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v(" Custom rules ")]),i("v-card-actions",[i("v-container",{attrs:{width:"80%"}},t._l(t.rules,(function(e){return i("v-switch",{key:e.rule,attrs:{label:e.rule},model:{value:e.valid,callback:function(i){t.$set(e,"valid",i)},expression:"item.valid"}})})),1)],1)],1)],1),i("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-btn",t._g({attrs:{text:""}},n),[t._v("Export")])]}}])},[i("v-list",[i("v-list-item",{on:{click:t.download}},[i("v-list-item-title",[t._v("Export Project")])],1),i("v-list-item",{on:{click:t.downloadPNG}},[i("v-list-item-title",[t._v("Export As PNG")])],1)],1)],1),i("v-btn",{attrs:{text:""}},[t._v("Help")])],1),i("line-editor",{ref:"line-editor",attrs:{active:t.onEditLine},on:{"end-edit-line":t.endEditLine}}),i("shape-editor",{attrs:{active:t.onEditShape,shape:t.editingShape},on:{"end-edit-shape":t.endEditShape}}),i("v-content",{staticClass:"grey lighten-1"},[i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("v-row",{attrs:{justify:"center",align:"center"}},[i("div",{attrs:{id:"canvas"}})])],1)],1)],1)},o=[],h=(i("a4d3"),i("e01a"),i("d28b"),i("4160"),i("d81d"),i("b0c0"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("2b3d"),i("9f12")),l=i("53fe"),c=i("8b83"),u=i("c65a"),v=i("c03e"),p=i("9ab4"),d=i("60a3"),f=(i("26e9"),i("a434"),i("0d03"),i("4ec9"),i("25f0"),i("22a2")),m=(i("99af"),function(){function t(){if(Object(h["a"])(this,t),this.spriteWidth=120,this.spriteHeight=60,this.squareRadius=5,this.lineInterval=10,this.dashedLinePieceLength=5,this.arrowHead=5,this.layerGap=10,this.textStyle={fontFamily:"Arial",fontSize:14,align:"center"},this.strokeColor=0,this.activeStrokeColor=1668818,this.machineColor=11771355,this.domainColor=11771355,this.requirementColor=11771355,this.defaultMachineName="machine",this.defaultMachineShortName="M",this.defaultDomainName="problemDomain",this.defaultDomainShortName="PD",this.defaultRequirementName="requirement",this.defaultInterfaceName="interface",this.defaultReferenceName="reference",this.defaultConstraintName="constraint",t.instance)return t.instance;t.instance=this}return Object(l["a"])(t,[{key:"hexToRGB",value:function(t){var e=Math.floor(t/65536),i=Math.floor(t%65536/256),n=t%256;return"rgb(".concat(e,", ").concat(i,", ").concat(n,")")}}]),t}()),y=m,b=i("284c"),g=i("902f"),x=new y,w=function(){function t(e,i,n){Object(h["a"])(this,t),this.textStyle=x.textStyle,this.spriteGroup=[],this.container=e,this.description=i,this.baseIndex=n,this.active=!1}return Object(l["a"])(t,[{key:"activate",value:function(){this.active||(this.active=!0,this.spriteGroup[1].visible=!1,this.spriteGroup[2].visible=!0)}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.spriteGroup[1].visible=!0,this.spriteGroup[2].visible=!1)}},{key:"repaint",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.spriteGroup[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;r.destroy()}}catch(s){e=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}this.paint()}},{key:"destroy",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.spriteGroup[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value;r.destroy()}}catch(s){e=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}}},{key:"flush",value:function(){this.repaint()}},{key:"isActive",get:function(){return this.active}}]),t}(),S=w,k=new y,L=function(t){function e(t,i,n,a,r){var s,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Object(h["a"])(this,e),s=Object(c["a"])(this,Object(u["a"])(e).call(this,t,i,n)),s.width=k.spriteWidth,s.height=k.spriteHeight,s.radius=k.squareRadius,s.interval=k.lineInterval,s.x=a,s.y=r,s.attachedLines=[],s.inCustomSize=o,s}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"paint",value:function(){var t=new f["d"](this.getDisplayText(),this.textStyle);t.x=this.x+this.getTextIndent(),t.y=this.getTextY(),t.zIndex=this.baseIndex+1;var e=this.drawBorder(k.strokeColor,t.width),i=this.drawBorder(k.activeStrokeColor,t.width);i.visible=!1,e.zIndex=i.zIndex=this.baseIndex,this.spriteGroup=[t,e,i];var n=!0,a=!1,r=void 0;try{for(var s,o=this.spriteGroup[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var h=s.value;this.container.addChild(h)}}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}},{key:"repaint",value:function(){Object(g["a"])(Object(u["a"])(e.prototype),"repaint",this).call(this);var t=!0,i=!1,n=void 0;try{for(var a,r=this.attachedLines[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value;s.updateLine()}}catch(o){i=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}}},{key:"contain",value:function(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height}},{key:"move",value:function(t,e){this.x+=t,this.y+=e;var i=!0,n=!1,a=void 0;try{for(var r,s=this.spriteGroup[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;o.x+=t,o.y+=e}}catch(d){n=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}var h=!0,l=!1,c=void 0;try{for(var u,v=this.attachedLines[Symbol.iterator]();!(h=(u=v.next()).done);h=!0){var p=u.value;p.updateLine()}}catch(d){l=!0,c=d}finally{try{h||null==v.return||v.return()}finally{if(l)throw c}}}},{key:"destroy",value:function(){return Object(g["a"])(Object(u["a"])(e.prototype),"destroy",this).call(this),Object(b["a"])(this.attachedLines)}},{key:"deleteLine",value:function(t){var e=-1;this.attachedLines.forEach((function(i,n){i===t&&(e=n)})),-1!==e&&this.attachedLines.splice(e,1)}},{key:"getTextY",value:function(){return this.y+this.height/2-1.25*this.textStyle.fontSize}},{key:"center",get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}}},{key:"isIsolated",get:function(){return 0===this.attachedLines.length}},{key:"neighbours",get:function(){var t=[];return this.attachedLines.forEach((function(e){return t.push(e.initiator,e.receiver)})),t}}]),e}(S),C=L,_=new y,j=function(t){function e(t,i,n,a,r,s,o){var l;return Object(h["a"])(this,e),l=Object(c["a"])(this,Object(u["a"])(e).call(this,t,a,s,i,n,o)),l.shortName=r,l.paint(),l}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"setInformation",value:function(t,e){this.description=t,this.shortName=e,this.repaint(),this.active&&(this.spriteGroup[1].visible=!1,this.spriteGroup[2].visible=!0)}},{key:"drawBorder",value:function(t,e){this.inCustomSize||(this.width=e+4*this.interval,this.height=_.spriteHeight);var i=new f["b"];return i.lineStyle(2,t,1),i.beginFill(_.machineColor,1),i.drawRoundedRect(0,0,this.width,this.height,this.radius),i.endFill(),i.lineStyle(2,t,1),i.beginFill(0,0),i.moveTo(this.interval,0),i.lineTo(this.interval,this.height),i.moveTo(2*this.interval,0),i.lineTo(2*this.interval,this.height),i.endFill(),i.x=this.x,i.y=this.y,i}},{key:"getTextIndent",value:function(){return 3*this.interval}},{key:"getDisplayText",value:function(){return"".concat(this.description,"\n(").concat(this.shortName,")")}},{key:"toSerializable",value:function(){return{x:this.x,y:this.y,description:this.description,shortName:this.shortName,baseIndex:this.baseIndex,inCustomSize:this.inCustomSize}}}]),e}(C),O=j,P=i("c8b5"),E=i.n(P),I=(i("c975"),new y);(function(t){t[t["GivenDomain"]=0]="GivenDomain",t[t["DesignDomain"]=1]="DesignDomain"})(n||(n={})),function(t){t[t["Casual"]=0]="Casual",t[t["Biddable"]=1]="Biddable",t[t["Lexical"]=2]="Lexical"}(a||(a={}));var D,N,T=function(t){function e(t,i,r,s,o,l,v,p,d){var f;return Object(h["a"])(this,e),f=Object(c["a"])(this,Object(u["a"])(e).call(this,t,s,l,i,r,d)),f.description=s,f.shortName=o,f.physicalProperty=v||n.GivenDomain,f.domainType=p||a.Casual,f.phenomenonList=[],f.paint(),f}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"addPhenomenon",value:function(t){this.phenomenonList.push(t)}},{key:"removePhenomenon",value:function(t){var e=this.phenomenonList.indexOf(t);-1!==e&&this.phenomenonList.splice(e,1)}},{key:"setInformation",value:function(t,e,i,n){this.description=t,this.shortName=e,this.domainType=i,this.physicalProperty=n,this.repaint(),this.active&&(this.spriteGroup[1].visible=!1,this.spriteGroup[2].visible=!0)}},{key:"drawBorder",value:function(t,e){this.inCustomSize||(this.width=this.physicalProperty===n.DesignDomain?e+3*this.interval:e+2*this.interval,this.height=I.spriteHeight);var i=new f["b"];return i.lineStyle(2,t,1),i.beginFill(I.domainColor,1),i.drawRoundedRect(0,0,this.width,this.height,this.radius),i.endFill(),this.physicalProperty===n.DesignDomain&&(i.lineStyle(2,t,1),i.beginFill(0,0),i.moveTo(this.interval,0),i.lineTo(this.interval,this.height),i.endFill()),i.x=this.x,i.y=this.y,i}},{key:"paint",value:function(){Object(g["a"])(Object(u["a"])(e.prototype),"paint",this).call(this);var t="CBX"[this.domainType],i=new f["d"](t,this.textStyle);i.x=this.x+this.width-i.width-2,i.y=this.y+this.height-i.height,i.zIndex=this.baseIndex+1,this.spriteGroup.push(i),this.container.addChild(i)}},{key:"getDisplayText",value:function(){return"".concat(this.description,"\n(").concat(this.shortName,")")}},{key:"getTextIndent",value:function(){return this.physicalProperty===n.DesignDomain?2*this.interval:this.interval}},{key:"getTextY",value:function(){return this.y+this.height/2-1.25*this.textStyle.fontSize}},{key:"toSerializable",value:function(){return{x:this.x,y:this.y,description:this.description,shortName:this.shortName,baseIndex:this.baseIndex,physicalProperty:this.physicalProperty,domainType:this.domainType,phenomenonList:this.phenomenonList.map((function(t){return t.toSerializable()})),inCustomSize:this.inCustomSize}}}]),e}(C),V=(i("cb29"),new y),G=function(t){function e(t,i,n,a,r,s){var o;return Object(h["a"])(this,e),o=Object(c["a"])(this,Object(u["a"])(e).call(this,t,a,r,i,n,s)),o.paint(),o}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"drawBorder",value:function(t,e){this.inCustomSize||(this.width=e+4*this.interval,this.height=V.spriteHeight);var i=2,n=2,a=document.createElement("canvas");a.width=window.devicePixelRatio*(this.width+i),a.height=window.devicePixelRatio*(this.height+i),a.style.width=this.width+i+"px",a.style.height=this.height+i+"px";var r=a.getContext("2d");r.scale(window.devicePixelRatio,window.devicePixelRatio),r.lineWidth=n,r.strokeStyle=V.hexToRGB(t),r.setLineDash([5,5]),r.beginPath(),r.ellipse(this.width/2+i/2,this.height/2+i/2,this.width/2,this.height/2,0,0,360),r.stroke(),r.closePath(),r.beginPath(),r.fillStyle=V.hexToRGB(V.requirementColor),r.ellipse(this.width/2+i/2,this.height/2+i/2,this.width/2-n/2,this.height/2-n/2,0,0,360),r.fill(),r.closePath();var s=a.toDataURL(),o=f["c"].from(s);return o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o}},{key:"setInformation",value:function(t){this.description=t,this.repaint(),this.active&&(this.spriteGroup[1].visible=!1,this.spriteGroup[2].visible=!0)}},{key:"getDisplayText",value:function(){return this.description}},{key:"getTextIndent",value:function(){return 2*this.interval}},{key:"getTextY",value:function(){return this.y+this.height/2-.75*this.textStyle.fontSize}},{key:"toSerializable",value:function(){return{x:this.x,y:this.y,description:this.description,baseIndex:this.baseIndex,inCustomSize:this.inCustomSize}}}]),e}(C),R=G;i("a15b");(function(t){t[t["Event"]=0]="Event",t[t["State"]=1]="State",t[t["Value"]=2]="Value"})(D||(D={})),function(t){t[t["Left"]=0]="Left",t[t["Right"]=1]="Right"}(N||(N={}));var z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:D.Event,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6?arguments[6]:void 0;Object(h["a"])(this,t),this.name=o||t.PhenomenonList.length.toString(),this.description=e,this.type=r,this.constraint=s,this.position=i,this.initiator=n,this.receiver=a,t.PhenomenonList.push(this)}return Object(l["a"])(t,[{key:"toSerializable",value:function(){return{name:this.name,description:this.description,type:this.type,constraint:this.constraint,initiator:this.initiator.description,receiver:this.receiver.description,position:this.position}}}],[{key:"getPhenomenon",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!0,r=!1,s=void 0;try{for(var o,h=t.PhenomenonList[Symbol.iterator]();!(a=(o=h.next()).done);a=!0){var l=o.value;if((!n&&l.description===e||n&&l.name===e)&&(!i||i&&l.position===N.Left))return l}}catch(c){r=!0,s=c}finally{try{a||null==h.return||h.return()}finally{if(r)throw s}}}},{key:"deletePhenomenon",value:function(e){var i;t.PhenomenonList.forEach((function(t,n){t.name===e&&(i=n)})),t.PhenomenonList.splice(i,1)}}]),t}();z.PhenomenonList=[];var q=new y,M=function(t){function e(t,i,n,a){var r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(h["a"])(this,e),r=Object(c["a"])(this,Object(u["a"])(e).call(this,t,i,n)),r.initiator=a,r.receiver=s,r.phenomenonList=[],r.start={x:-1,y:-1},r.end={x:0,y:0},s?(r.attach(s),r.mount(),r.repaint()):r.attached=!1,r}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"isIntermediate",get:function(){return this.initiator instanceof T&&this.receiver instanceof T}}]),Object(l["a"])(e,[{key:"lengthen",value:function(t){this.start=this.getIntersectionPoint(this.initiator,{x:t.x,y:t.y}),this.end=t,this.attached=!1,this.receiver=null,this.repaint()}},{key:"attach",value:function(t){this.start=this.getIntersectionPoint(this.initiator,t.center),this.end=this.getIntersectionPoint(t,this.initiator.center),this.attached=!0,this.receiver=t,this.repaint()}},{key:"mount",value:function(){this.receiver&&(this.receiver.attachedLines.push(this),this.initiator.attachedLines.push(this))}},{key:"updateLine",value:function(){this.receiver&&(this.start=this.getIntersectionPoint(this.initiator,this.receiver.center),this.end=this.getIntersectionPoint(this.receiver,this.initiator.center),this.repaint())}},{key:"setInformation",value:function(t,e,i){t&&(this.description=t),e&&(this.initiator=e),i&&(this.receiver=i),this.repaint(),this.active&&(this.spriteGroup[1].visible=!1,this.spriteGroup[2].visible=!0)}},{key:"addPhenomenon",value:function(t){var e=!1,i=!0,n=!1,a=void 0;try{for(var r,s=this.phenomenonList[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;if(o.description===t.description){e=!0;break}}}catch(h){n=!0,a=h}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}e||(this.phenomenonList.push(t),this.repaint())}},{key:"hasPhenomenon",value:function(t){var e=!1;return this.phenomenonList.forEach((function(i){i.description===t&&(e=!0)})),e}},{key:"deletePhenomenon",value:function(t){var e=this.phenomenonList.indexOf(t);-1!==e&&this.phenomenonList.splice(e,1),this.repaint()}},{key:"destroy",value:function(){Object(g["a"])(Object(u["a"])(e.prototype),"destroy",this).call(this),this.initiator&&this.initiator.deleteLine(this),this.receiver&&this.receiver.deleteLine(this);var t=!0,i=!1,n=void 0;try{for(var a,r=this.phenomenonList[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value;if(s.position!==N.Left){z.deletePhenomenon(s.name);var o=void 0;this.initiator instanceof T&&(o=this.initiator),this.receiver instanceof T&&(o=this.receiver),o&&o.removePhenomenon(s)}}}catch(h){i=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}}},{key:"paint",value:function(){var t,e,i,n,a=this,r=0===this.spriteGroup.length;t=this.spriteGroup[0]?this.spriteGroup[0]:new f["d"](this.getDisplayText(),this.textStyle),t.text=this.getDisplayText(),t.textStyle=this.textStyle,t.x=(this.start.x+this.end.x)/2-t.width/2,t.y=(this.start.y+this.end.y)/2-t.height/2,t.zIndex=this.baseIndex+2,e=this.spriteGroup[3]?this.spriteGroup[3]:new f["b"],e.clear(),e.beginFill(16777215,1),e.drawRect(t.x,t.y,t.width,t.height),e.endFill(),e.zIndex=this.baseIndex+1,i=this.spriteGroup[1]?this.spriteGroup[1]:new f["b"],n=this.spriteGroup[2]?this.spriteGroup[2]:new f["b"],i=this.drawSkeleton(i,q.strokeColor),n=this.drawSkeleton(n,q.activeStrokeColor),this.active?(n.visible=!0,i.visible=!1):(n.visible=!1,i.visible=!0),i.zIndex=n.zIndex=this.baseIndex,this.spriteGroup=[t,i,n,e],r&&this.spriteGroup.forEach((function(t){return a.container.addChild(t)}))}},{key:"repaint",value:function(){this.attached&&(this.start=this.getIntersectionPoint(this.initiator,this.receiver.center),this.end=this.getIntersectionPoint(this.receiver,this.initiator.center)),this.paint()}},{key:"getDashedLine",value:function(t,e,i,n){t.clear(),t.lineStyle(2,e,1),t.beginFill(e,1),t.moveTo(i.x,i.y);for(var a=Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2),r=Math.floor(Math.sqrt(a)/10),s=.6,o=(n.x-i.x)/r,h=(n.y-i.y)/r,l=0;l<r;l++)t.moveTo(i.x+l*o,i.y+l*h),t.lineTo(i.x+l*o+s*o,i.y+l*h+s*h);return t}},{key:"selfContain",value:function(t){return this.initiator.contain(t)}},{key:"getDisplayText",value:function(){var t=new Map,e="".concat(this.description,":");this.phenomenonList.forEach((function(e){if(!(e.initiator instanceof O||e.initiator instanceof T))throw"Phenomenon has Requirement participant.";var i=e.initiator.shortName;t.has(i)||t.set(i,[]),t.get(i).push(e.description)}));var i=!0,n=!1,a=void 0;try{for(var r,s=t.entries()[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;e+=o[0]+"!{",e+=o[1].join()+"}"}}catch(h){n=!0,a=h}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return e}},{key:"contain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=-(this.end.x-this.start.x)/(this.end.y-this.start.y),n=-i*this.end.y-this.end.x,a=Math.abs(t.x+t.y*i+n)/Math.sqrt(i*i+1),r=(t.x-this.start.x)*(t.x-this.end.x),s=(t.y-this.start.y)*(t.y-this.end.y);return a<e&&r<0&&s<0}},{key:"getIntersectionPoint",value:function(t,e){if(t.contain(e))return{x:-1,y:-1};var i,n;e.x-=t.center.x,e.y-=t.center.y;var a=t.width/2,r=t.height/2;if(t instanceof R){var s=e.y/e.x;i=1/Math.sqrt(1/Math.pow(a,2)+Math.pow(s/r,2)),e.x<0&&(i=-i),n=s*i,i+=t.center.x,n+=t.center.y}else{var o=e.y/e.x,h=r/a;Math.abs(o)>h?(n=r,e.y<0&&(n=-n),i=n/o):(i=a,e.x<0&&(i=-i),n=i*o),n=o*i,i+=t.center.x,n+=t.center.y}return{x:i,y:n}}}]),e}(S),A=function(t){function e(t,i,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(h["a"])(this,e),Object(c["a"])(this,Object(u["a"])(e).call(this,t,i,n,a,r))}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"drawSkeleton",value:function(t,e){return t.clear(),t.lineStyle(2,e,1),t.beginFill(e,1),t.moveTo(this.start.x,this.start.y),t.lineTo(this.end.x,this.end.y),t.endFill(),t}},{key:"destroy",value:function(){Object(g["a"])(Object(u["a"])(e.prototype),"destroy",this).call(this);var t=!0,i=!1,n=void 0;try{for(var a,r=this.phenomenonList[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value;if(s.position!==N.Right){z.deletePhenomenon(s.name);var o=void 0;this.initiator instanceof T&&(o=this.initiator),this.receiver instanceof T&&(o=this.receiver),o&&o.removePhenomenon(s)}}}catch(h){i=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}}},{key:"toSerializable",value:function(){return{description:this.description,baseIndex:this.baseIndex,initiator:this.initiator.description,receiver:this.receiver.description,phenomenonList:this.phenomenonList.map((function(t){return t.toSerializable()}))}}}]),e}(M),$=function(t){function e(t,i,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(h["a"])(this,e),Object(c["a"])(this,Object(u["a"])(e).call(this,t,i,n,a,r))}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"setInformation",value:function(t,i,n){Object(g["a"])(Object(u["a"])(e.prototype),"setInformation",this).call(this,t,i,n)}},{key:"drawSkeleton",value:function(t,e){return t=this.getDashedLine(t,e,this.start,this.end),t.endFill(),t}},{key:"toSerializable",value:function(){return{description:this.description,baseIndex:this.baseIndex,initiator:this.initiator.description,receiver:this.receiver.description,phenomenonList:this.phenomenonList.map((function(t){return t.toSerializable()}))}}}]),e}(M),B=$,Y=function(t){function e(t,i,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(h["a"])(this,e),Object(c["a"])(this,Object(u["a"])(e).call(this,t,i,n,a,r))}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"setInformation",value:function(t,i,n){Object(g["a"])(Object(u["a"])(e.prototype),"setInformation",this).call(this,t,i,n)}},{key:"drawSkeleton",value:function(t,e){t=this.getDashedLine(t,e,this.start,this.end);var i=[this.start.x,this.start.y],n=i[0],a=i[1],r=[this.end.x,this.end.y],s=r[0],o=r[1],h=(o-a)/(s-n),l=-(h+1)/(h-1),c=o-l*s,u=(h-1)/(h+1),v=o-u*s,p=n-s,d=a-o,f=Math.sqrt(p*p+d*d),m=p/f,y=d/f,b=s+Math.sqrt(2)*(m-y)/2*10,g=b*l+c,x=s+Math.sqrt(2)*(m+y)/2*10,w=x*u+v;return t.moveTo(this.end.x,this.end.y),t.lineTo(b,g),t.moveTo(this.end.x,this.end.y),t.lineTo(x,w),t.endFill(),t}},{key:"toSerializable",value:function(){return{description:this.description,baseIndex:this.baseIndex,initiator:this.initiator.description,receiver:this.receiver.description,phenomenonList:this.phenomenonList.map((function(t){return t.toSerializable()}))}}}]),e}(M),F=Y,X=new y,H=function(){function t(e){if(Object(h["a"])(this,t),this.app=null,this.width=window.innerWidth-600,this.height=window.innerHeight-100,this.draggingComponent=null,this.editingComponent=null,this.drawingLine=null,this.lastDeltaX=0,this.lastDeltaY=0,this.activePen=-1,this._Vue=null,this.componentsList=[],this.componentsCount=0,this.machine=null,this.domainList=[],this.domainCount=0,this.requirementList=[],this.requirementCount=0,this.interfaceList=[],this.interfaceCount=0,this.referenceList=[],this.referenceCount=0,this.constraintList=[],this.constraintCount=0,t.instance)return t.instance;e&&(this._Vue=e),this.app=new f["a"]({width:this.width,height:this.height,antialias:!0,transparent:!1,resolution:window.devicePixelRatio}),this.app.renderer.backgroundColor=16777215,this.app.stage.sortableChildren=!0;var i=document.getElementById("canvas");if(i){i.appendChild(this.app.view),this.app.view.style.width=this.width.toString()+"px",this.app.view.style.height=this.height.toString()+"px";var n=new E.a(this.app.view);n.get("pan").set({direction:E.a.DIRECTION_ALL}),n.on("tap",this.tapHandler.bind(this)),n.on("pan panstart panend",this.panHandler.bind(this)),n.on("doubletap",this.doubleTapHandler.bind(this))}}return Object(l["a"])(t,[{key:"findShape",value:function(t){var e=!0,i=!1,n=void 0;try{for(var a,r=this.componentsList[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var s=a.value;if(s.description===t&&s instanceof C)return s}}catch(o){i=!0,n=o}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}}},{key:"stuffLine",value:function(t,e,i){var n,a=e.findShape(t.initiator),r=e.findShape(t.receiver);switch(i){case"interface":n=new A(e.app.stage,t.description,t.baseIndex,a,r),e.interfaceList.push(n);break;case"reference":n=new B(e.app.stage,t.description,t.baseIndex,a,r),e.referenceList.push(n);break;case"constraint":n=new F(e.app.stage,t.description,t.baseIndex,a,r),e.constraintList.push(n);break}e.componentsList.push(n);var s=!0,o=!1,h=void 0;try{for(var l,c=t.phenomenonList[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;n.phenomenonList.push(z.getPhenomenon(u.name,!1,!0))}}catch(v){o=!0,h=v}finally{try{s||null==c.return||c.return()}finally{if(o)throw h}}n.flush()}},{key:"exportImage",value:function(){var t=this.app.renderer.plugins.extract.image(this.app.stage);t.onload=function(t){var e=document.createElement("a");e.href=t.path[0].src,e.download="img.png",e.click()}}},{key:"deleteElement",value:function(t){var e=null;if(t)e=t;else{var i=!0,n=!1,a=void 0;try{for(var r,s=this.componentsList[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;o.isActive&&(e=o)}}catch(f){n=!0,a=f}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}}if(e){var h=e.destroy();if(h){var l=!0,c=!1,u=void 0;try{for(var v,p=h[Symbol.iterator]();!(l=(v=p.next()).done);l=!0){var d=v.value;this.deleteElement(d)}}catch(f){c=!0,u=f}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}this.removeComponent(e,this.componentsList),e instanceof O?this.machine=null:e instanceof T?this.removeComponent(e,this.domainList):e instanceof R?this.removeComponent(e,this.requirementList):e instanceof A?this.removeComponent(e,this.interfaceList):e instanceof B?this.removeComponent(e,this.referenceList):e instanceof F&&this.removeComponent(e,this.constraintList)}}},{key:"merge",value:function(){var t=this,e=[];if(this.componentsList.forEach((function(t){t instanceof T&&t.isActive&&e.push(t)})),!(e.length<2)){var i=e[0].x,n=e[0].y,a=e[0].description,r=e[0].shortName,s=new Map;e.forEach((function(e){e.attachedLines.forEach((function(t){t.initiator instanceof T&&t.receiver instanceof T||(t.initiator instanceof T?(s.has(t.receiver)||s.set(t.receiver,[]),s.get(t.receiver).push(t)):t.receiver instanceof T&&(s.has(t.initiator)||s.set(t.initiator,[]),s.get(t.initiator).push(t)))})),t.deleteElement(e)}));var o=new T(this.app.stage,i,n,a,r,this.componentsCount*X.layerGap);this.domainCount++,this.domainList.push(o),this.componentsList.push(o),this.componentsCount++;var h=!0,l=!1,c=void 0;try{for(var u,v=function(){var e=u.value,i=void 0;e instanceof O?(i=new A(t.app.stage,X.defaultInterfaceName+(t.interfaceCount+1),t.componentsCount*X.layerGap,o,e),t.interfaceList.push(i),t.componentsList.push(i),t.interfaceCount++,t.componentsCount++):e instanceof R&&(i=new B(t.app.stage,X.defaultInterfaceName+(t.interfaceCount+1),t.componentsCount*X.layerGap,o,e),t.referenceList.push(i),t.componentsList.push(i),t.referenceCount++,t.componentsCount++);var n=!0,a=!1,r=void 0;try{for(var h,l=s.get(e)[Symbol.iterator]();!(n=(h=l.next()).done);n=!0){var c=h.value;c.phenomenonList.forEach((function(t){var e=new z(t.description,t.position,t.initiator instanceof T?o:t.initiator,t.receiver instanceof T?o:t.receiver,t.type,t.constraint);i.addPhenomenon(e),o.addPhenomenon(e)}))}}catch(v){a=!0,r=v}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}},p=s.keys()[Symbol.iterator]();!(h=(u=p.next()).done);h=!0)v()}catch(d){l=!0,c=d}finally{try{h||null==p.return||p.return()}finally{if(l)throw c}}}}},{key:"removeComponent",value:function(t,e){var i=-1;e.forEach((function(e,n){e===t&&(i=n)})),-1!==i&&e.splice(i,1)}},{key:"tapHandler",value:function(t){if("layerX"in t.srcEvent&&"layerY"in t.srcEvent){switch(this.activePen){case 0:if(this.machine){this._Vue.$emit("giveWarn","There can exist only one machine. ");break}var e=new O(this.app.stage,t.srcEvent.layerX,t.srcEvent.layerY,X.defaultMachineName,X.defaultMachineShortName,this.componentsCount*X.layerGap);this.machine=e,this.componentsList.push(e),this.componentsCount++;break;case 1:var i=new T(this.app.stage,t.srcEvent.layerX,t.srcEvent.layerY,X.defaultDomainName+(this.domainCount+1),X.defaultDomainShortName+(this.domainCount+1),this.componentsCount*X.layerGap);this.domainList.push(i),this.domainCount++,this.componentsList.push(i),this.componentsCount++;break;case 2:var n=new R(this.app.stage,t.srcEvent.layerX,t.srcEvent.layerY,X.defaultRequirementName+(this.requirementCount+1),this.componentsCount*X.layerGap);this.requirementList.push(n),this.requirementCount++,this.componentsList.push(n),this.componentsCount++;break;default:var a=this.hit(t.srcEvent.layerX,t.srcEvent.layerY);if(a){var r=!0,s=!1,o=void 0;try{for(var h,l=this.componentsList[Symbol.iterator]();!(r=(h=l.next()).done);r=!0){var c=h.value;c===a?a.activate():t.srcEvent.ctrlKey||c.deactivate()}}catch(y){s=!0,o=y}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}}else{var u=!0,v=!1,p=void 0;try{for(var d,f=this.componentsList[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var m=d.value;m.deactivate()}}catch(y){v=!0,p=y}finally{try{u||null==f.return||f.return()}finally{if(v)throw p}}}break}this._Vue.$data["activePen"]=void 0}}},{key:"panHandler",value:function(t){if("layerX"in t.srcEvent&&"layerY"in t.srcEvent)switch(t.type){case"panstart":var e=this.hit(t.srcEvent.layerX,t.srcEvent.layerY);if(!e)return;if(!(e instanceof C))return;switch(this.activePen){case 3:this.drawingLine=new A(this.app.stage,X.defaultInterfaceName+(this.interfaceCount+1),this.componentsCount*X.layerGap,e);break;case 4:this.drawingLine=new B(this.app.stage,X.defaultReferenceName+(this.referenceCount+1),this.componentsCount*X.layerGap,e);break;case 5:if(!(e instanceof R))break;this.drawingLine=new F(this.app.stage,X.defaultConstraintName+(this.constraintCount+1),this.componentsCount*X.layerGap,e);break;default:this.draggingComponent=e;break}break;case"pan":if(this.draggingComponent&&(this.draggingComponent.move(t.deltaX-this.lastDeltaX,t.deltaY-this.lastDeltaY),this.lastDeltaX=t.deltaX,this.lastDeltaY=t.deltaY),this.drawingLine){var i={x:t.srcEvent.layerX,y:t.srcEvent.layerY};if(!this.drawingLine.selfContain(i)){var n=this.hit(t.srcEvent.layerX,t.srcEvent.layerY);n instanceof C?this.drawingLine.attach(n):this.drawingLine.lengthen(i)}}break;case"panend":this.draggingComponent=null,this.lastDeltaX=0,this.lastDeltaY=0,this.drawingLine&&(this.drawingLine.attached?(this.drawingLine.mount(),this.componentsList.push(this.drawingLine),this.componentsCount++,this.drawingLine instanceof A?(this.interfaceList.push(this.drawingLine),this.interfaceCount++):this.drawingLine instanceof B?(this.referenceList.push(this.drawingLine),this.referenceCount++):this.drawingLine instanceof F&&(this.constraintList.push(this.drawingLine),this.constraintCount++)):this.drawingLine.destroy(),this.drawingLine=null),this._Vue.$data["activePen"]=void 0;break}}},{key:"doubleTapHandler",value:function(t){if("layerX"in t.srcEvent&&"layerY"in t.srcEvent){var e=this.hit(t.srcEvent.layerX,t.srcEvent.layerY);e&&(this.editingComponent=e,e instanceof C?this._Vue.$emit("edit-shape",e):e instanceof M&&this._Vue.$emit("edit-line",e))}}},{key:"hit",value:function(t,e){var i=!0,n=!1,a=void 0;try{for(var r,s=this.componentsList.reverse()[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;if(o.contain({x:t,y:e}))return this.componentsList.reverse(),o}}catch(h){n=!0,a=h}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return this.componentsList.reverse(),null}}],[{key:"init",value:function(e){t.instance=new t(e)}},{key:"destroy",value:function(){t.instance=null}},{key:"load",value:function(e,i){var n=t.instance=new t(e);n.componentsCount=i.componentsCount,n.domainCount=i.domainCount,n.interfaceCount=i.interfaceCount,n.referenceCount=i.referenceCount,n.constraintCount=i.constraintCount;var a=i.machine,r=new O(n.app.stage,a.x,a.y,a.description,a.shortName,a.baseIndex,a.inCustomSize);n.machine=r,n.componentsList.push(r);var s=!0,o=!1,h=void 0;try{for(var l,c=i.phenomenonList[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;new z(u.description,u.position,null,null,u.type,u.constraint,u.name)}}catch(vt){o=!0,h=vt}finally{try{s||null==c.return||c.return()}finally{if(o)throw h}}var v=!0,p=!1,d=void 0;try{for(var f,m=i.domainList[Symbol.iterator]();!(v=(f=m.next()).done);v=!0){var y=f.value,b=new T(n.app.stage,y.x,y.y,y.description,y.shortName,y.baseIndex,y.physicalProperty,y.domainType,y.inCustomSize),g=!0,x=!1,w=void 0;try{for(var S,k=y.phenomenonList[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var L=S.value;b.phenomenonList.push(z.getPhenomenon(L.name,!1,!0))}}catch(vt){x=!0,w=vt}finally{try{g||null==k.return||k.return()}finally{if(x)throw w}}n.domainList.push(b),n.componentsList.push(b)}}catch(vt){p=!0,d=vt}finally{try{v||null==m.return||m.return()}finally{if(p)throw d}}var C=!0,_=!1,j=void 0;try{for(var P,E=i.requirementList[Symbol.iterator]();!(C=(P=E.next()).done);C=!0){var I=P.value,D=new R(n.app.stage,I.x,I.y,I.description,I.baseIndex,I.inCustomSize);n.requirementList.push(D),n.componentsList.push(D)}}catch(vt){_=!0,j=vt}finally{try{C||null==E.return||E.return()}finally{if(_)throw j}}var N=!0,V=!1,G=void 0;try{for(var q,M=z.PhenomenonList[Symbol.iterator]();!(N=(q=M.next()).done);N=!0){var A=q.value,$=!0,B=!1,Y=void 0;try{for(var F,X=i.phenomenonList[Symbol.iterator]();!($=(F=X.next()).done);$=!0){var H=F.value;A.name===H.name&&(A.initiator=n.findShape(H.initiator),A.receiver=n.findShape(H.receiver))}}catch(vt){B=!0,Y=vt}finally{try{$||null==X.return||X.return()}finally{if(B)throw Y}}}}catch(vt){V=!0,G=vt}finally{try{N||null==M.return||M.return()}finally{if(V)throw G}}var U=!0,W=!1,J=void 0;try{for(var K,Q=i.interfaceList[Symbol.iterator]();!(U=(K=Q.next()).done);U=!0){var Z=K.value;n.stuffLine(Z,n,"interface")}}catch(vt){W=!0,J=vt}finally{try{U||null==Q.return||Q.return()}finally{if(W)throw J}}var tt=!0,et=!1,it=void 0;try{for(var nt,at=i.referenceList[Symbol.iterator]();!(tt=(nt=at.next()).done);tt=!0){var rt=nt.value;n.stuffLine(rt,n,"reference")}}catch(vt){et=!0,it=vt}finally{try{tt||null==at.return||at.return()}finally{if(et)throw it}}var st=!0,ot=!1,ht=void 0;try{for(var lt,ct=i.constraintList[Symbol.iterator]();!(st=(lt=ct.next()).done);st=!0){var ut=lt.value;n.stuffLine(ut,n,"constraint")}}catch(vt){ot=!0,ht=vt}finally{try{st||null==ct.return||ct.return()}finally{if(ot)throw ht}}return n}}]),t}(),U=H,W=function(){function t(e,i,n){Object(h["a"])(this,t),this.step=i||1,this.subStep=n||1,this.canvas=e}return Object(l["a"])(t,[{key:"next",value:function(){var e="",i="";if(1===this.step&&this.subStep<3||2===this.step&&this.subStep<2)this.subStep++;else if(1===this.step&&3===this.subStep){var n=this.canvas.domainList.length,a=!0,r=!1,s=void 0;try{for(var o,h=this.canvas.interfaceList[Symbol.iterator]();!(a=(o=h.next()).done);a=!0){var l=o.value;if(t.ruleSet[2]["valid"]&&0===l.phenomenonList.length){i+="Exist undefined interface.\n";break}}}catch(i){r=!0,s=i}finally{try{a||null==h.return||h.return()}finally{if(r)throw s}}t.ruleSet[3]["valid"]&&0===n&&(i+="No ProblemDomain detected.\n"),t.ruleSet[0]["valid"]&&null===this.canvas.machine?i="No Machine detected.":t.ruleSet[4]["valid"]&&this.canvas.machine.isIsolated&&(i+="Exist Unconnected Machine.\n");var c=!0,u=!1,v=void 0;try{for(var p,d=this.canvas.domainList[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;if(t.ruleSet[5]["valid"]&&f.isIsolated){i+="Exist Unconnected ProblemDomain.\n";break}}}catch(i){u=!0,v=i}finally{try{c||null==d.return||d.return()}finally{if(u)throw v}}""===i&&(this.step=2,this.subStep=1,e="Step one all right")}else if(2===this.step&&2===this.subStep){var m=!0,y=!1,b=void 0;try{for(var g,x=this.canvas.referenceList[Symbol.iterator]();!(m=(g=x.next()).done);m=!0){var w=g.value;if(t.ruleSet[6]["valid"]&&0===w.phenomenonList.length){i+="Exist undefined reference.\n";break}}}catch(i){y=!0,b=i}finally{try{m||null==x.return||x.return()}finally{if(y)throw b}}var S=!0,k=!1,L=void 0;try{for(var C,_=this.canvas.constraintList[Symbol.iterator]();!(S=(C=_.next()).done);S=!0){var j=C.value;t.ruleSet[7]["valid"]&&0===j.phenomenonList.length&&(i+="Exist undefined constraint.\n")}}catch(i){k=!0,L=i}finally{try{S||null==_.return||_.return()}finally{if(k)throw L}}if(0===this.canvas.requirementList.length)i+="No Requirement detected.\n";else if(t.ruleSet[1]["valid"]&&1===this.canvas.requirementList.length)i+="Just One Requirement detected.\n";else{var O=!0,P=!1,E=void 0;try{for(var I,D=this.canvas.requirementList[Symbol.iterator]();!(O=(I=D.next()).done);O=!0){var N=I.value;if(N.isIsolated){i+="Exist Unconnected Requirement.\n";break}}}catch(i){P=!0,E=i}finally{try{O||null==D.return||D.return()}finally{if(P)throw E}}}""===i&&(this.step=2,this.subStep=3,e="Diagram all right")}return 0!==i.length?{err:i}:{success:e,step:this.step,subStep:this.subStep}}},{key:"previous",value:function(){return this.subStep>1?this.subStep--:2===this.step&&(this.step=1,this.subStep=4),{step:this.step,subStep:this.subStep}}},{key:"getAllow",value:function(){if(1==this.step){if(1==this.subStep)return[!0,!1,!1,!1,!1,!1];if(2==this.subStep)return[!1,!0,!1,!1,!1,!1];if(3===this.subStep)return[!1,!1,!1,!0,!1,!1]}return 1==this.subStep?[!1,!1,!0,!1,!1,!1]:2==this.subStep?[!1,!1,!1,!1,!0,!0]:[!1,!1,!1,!1,!1,!1]}}]),t}();W.ruleSet=[{rule:"One Machine",valid:!0},{rule:"Multiple Requirement",valid:!1},{rule:"Interface Defined",valid:!0},{rule:"Multiple ProblemDomain",valid:!0},{rule:"No Machine Unconnected",valid:!0},{rule:"No ProblemDomain Unconnected",valid:!0},{rule:"Reference Defined",valid:!0},{rule:"Constraint Defined",valid:!0}];var J=W,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.editorType)+" Information")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-text-field",{attrs:{label:"description",required:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),i("v-row",[i("v-select",{attrs:{items:t.actorName,label:"Initiator",required:""},model:{value:t.initiator,callback:function(e){t.initiator=e},expression:"initiator"}})],1),i("v-row",[i("v-select",{attrs:{items:t.actorName,label:"Receiver",required:""},model:{value:t.receiver,callback:function(e){t.receiver=e},expression:"receiver"}})],1),i("v-row",[i("v-menu",{attrs:{absolute:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-text-field",t._g({attrs:{label:"Phenomenon"},model:{value:t.phenomenonNameEdit,callback:function(e){t.phenomenonNameEdit=e},expression:"phenomenonNameEdit"}},n))]}}])},[i("v-list",[i("v-list-item-group",t._l(t.choices,(function(e){return i("v-list-item",{key:e.text,on:{click:function(i){return t.selectPhenomenon(e.value)}}},[t._v(t._s(e.text))])})),1)],1)],1)],1),i("v-row",[i("v-select",{attrs:{items:t.phenomenonType,label:"Type",required:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),i("v-row",[t.hasConstraint?i("v-checkbox",{attrs:{label:"constraint"},model:{value:t.isConstraint,callback:function(e){t.isConstraint=e},expression:"isConstraint"}}):t._e()],1),i("v-row",[i("v-list",[i("v-list-item-group",{model:{value:t.phenomenonSelect,callback:function(e){t.phenomenonSelect=e},expression:"phenomenonSelect"}},[i("v-subheader",[t._v("PhenomenonList")]),t._l(t.phenomenonList,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){t.phenomenonName=e.name}}},[t._v(t._s(t.line.initiator.description+":"+e.description+" "+t.phenomenonType[e.type].text))])}))],2)],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.add}},[t._v("Add")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.del}},[t._v("Delete")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.cancel}},[t._v("Close")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.submit}},[t._v("Save")])],1)],1)],1)},Q=[],Z=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.editorType="",t.hasConstraint=!1,t.line=null,t.domains=[],t.machine=null,t.description="",t.initiator=0,t.receiver=1,t.actors=[],t.phenomenonType=[{text:"event",value:0},{text:"state",value:1},{text:"value",value:2}],t.phenomenonNameEdit="",t.type=0,t.isConstraint=!1,t.phenomenonName="",t.phenomenonChoices=[],t.phenomenonSelect=-1,t.phenomenonList=[],t}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"submit",value:function(){this.initiator!==this.receiver&&1!==this.initiator?this.line.setInformation(this.description,this.actors[this.initiator],this.actors[this.receiver]):this.line.setInformation(this.description,null,null),this.$emit("end-edit-line")}},{key:"cancel",value:function(){this.$emit("end-edit-line")}},{key:"preSet",value:function(t){t instanceof A?(this.editorType="Interface",this.hasConstraint=!1):t instanceof B?(this.editorType="Reference",this.hasConstraint=!0):t instanceof F&&(this.editorType="Constraint",this.hasConstraint=!0),this.line=t,this.description=t.description,this.phenomenonList=t.phenomenonList,this.phenomenonSelect=-1,this.phenomenonNameEdit="",this.type=0,this.isConstraint=!1,this.actors=[this.line.initiator,this.line.receiver],this.initiator=0,this.receiver=1,this.domains=[],this.line.initiator instanceof T&&this.domains.push(this.line.initiator),this.line.receiver instanceof T&&this.domains.push(this.line.receiver),this.line.isIntermediate?this.phenomenonChoices=[]:this.phenomenonChoices=this.domains[0].phenomenonList}},{key:"add",value:function(){if(""!==this.phenomenonNameEdit)if(this.line instanceof A){if(z.getPhenomenon(this.phenomenonNameEdit))return;var t=new z(this.phenomenonNameEdit,N.Left,this.line.initiator,this.line.receiver,this.type);this.line.addPhenomenon(t),this.domains.forEach((function(e){return e.addPhenomenon(t)}))}else{var e=z.getPhenomenon(this.phenomenonNameEdit,!0);if(e)this.line.addPhenomenon(e);else{if(this.line.hasPhenomenon(this.phenomenonNameEdit))return;var i=this.line.initiator,n=this.line.receiver;if(i instanceof R){var a=!0,r=!1,s=void 0;try{for(var o,h=n.neighbours[Symbol.iterator]();!(a=(o=h.next()).done);a=!0){var l=o.value;if(l!==i){i=l;break}}}catch(m){r=!0,s=m}finally{try{a||null==h.return||h.return()}finally{if(r)throw s}}}if(n instanceof R){var c=!0,u=!1,v=void 0;try{for(var p,d=i.neighbours[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;if(f!==n){n=f;break}}}catch(m){u=!0,v=m}finally{try{c||null==d.return||d.return()}finally{if(u)throw v}}}e=new z(this.phenomenonNameEdit,N.Right,i,n,this.type,this.isConstraint),this.line.addPhenomenon(e),this.domains.forEach((function(t){return t.addPhenomenon(e)}))}}else alert("Phenomenon name cannot be empty.")}},{key:"del",value:function(){var t=this;!(this.line instanceof A)&&this.phenomenonList[this.phenomenonSelect].position===N.Right||this.line instanceof A&&this.phenomenonList[this.phenomenonSelect].position===N.Left?(this.domains.forEach((function(e){return e.removePhenomenon(t.phenomenonList[t.phenomenonSelect])})),this.line.deletePhenomenon(this.phenomenonList[this.phenomenonSelect]),z.deletePhenomenon(this.phenomenonName)):this.line instanceof A||this.phenomenonList[this.phenomenonSelect].position!==N.Left||this.line.deletePhenomenon(this.phenomenonList[this.phenomenonSelect])}},{key:"selectPhenomenon",value:function(t){this.phenomenonNameEdit=this.phenomenonChoices[t].description,this.isConstraint=this.phenomenonChoices[t].constraint,this.type=this.phenomenonChoices[t].type}},{key:"actorName",get:function(){return this.actors.map((function(t,e){return{text:t.description,value:e}}))}},{key:"choices",get:function(){return this.line instanceof A?[]:this.phenomenonChoices.map((function(t,e){return{text:t.description,value:e}}))}}]),e}(d["c"]);p["a"]([Object(d["b"])(Boolean)],Z.prototype,"active",void 0),Z=p["a"]([Object(d["a"])({watch:{isConstraint:function(t){-1!==this.phenomenonSelect&&void 0!==this.phenomenonSelect&&(this.phenomenonList[this.phenomenonSelect].constraint=t)},type:function(t){-1!==this.phenomenonSelect&&void 0!==this.phenomenonSelect&&(this.phenomenonList[this.phenomenonSelect].type=t)}}})],Z);var tt=Z,et=tt,it=i("2877"),nt=i("6544"),at=i.n(nt),rt=i("8336"),st=i("b0af"),ot=i("99d9"),ht=i("ac7c"),lt=i("a523"),ct=i("169a"),ut=i("8860"),vt=i("da13"),pt=i("1baa"),dt=i("e449"),ft=i("0fd9"),mt=i("b974"),yt=i("2fa4"),bt=i("e0c7"),gt=i("8654"),xt=Object(it["a"])(et,K,Q,!1,null,"208a8733",null),wt=xt.exports;at()(xt,{VBtn:rt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCheckbox:ht["a"],VContainer:lt["a"],VDialog:ct["a"],VList:ut["a"],VListItem:vt["a"],VListItemGroup:pt["a"],VMenu:dt["a"],VRow:ft["a"],VSelect:mt["a"],VSpacer:yt["a"],VSubheader:bt["a"],VTextField:gt["a"]});var St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.shape?i("v-dialog",{attrs:{value:t.active,persistent:"","max-width":"600px"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Requirement Information")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-text-field",{attrs:{label:"description"},on:{change:t.displayChange},model:{value:t.shape.description,callback:function(e){t.$set(t.shape,"description",e)},expression:"shape.description"}})],1),t.haveShortName?i("v-row",[i("v-text-field",{attrs:{label:"short name"},on:{change:t.displayChange},model:{value:t.shape.shortName,callback:function(e){t.$set(t.shape,"shortName",e)},expression:"shape.shortName"}})],1):t._e(),i("v-row",{attrs:{justify:"space-between"}},[i("v-col",[i("v-text-field",{attrs:{label:"width",type:"number"},on:{change:t.sizeChange},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),i("v-col",[i("v-text-field",{attrs:{label:"height",type:"number"},on:{change:t.sizeChange},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1)],1),t.isDomain?i("v-row",[i("v-select",{attrs:{items:[{text:"GivenDomain",value:0},{text:"DesignDomain",value:1}],label:"Physical Property",required:""},model:{value:t.shape.physicalProperty,callback:function(e){t.$set(t.shape,"physicalProperty",e)},expression:"shape.physicalProperty"}})],1):t._e(),t.isDomain?i("v-row",[i("v-select",{attrs:{items:[{text:"Causal",value:0},{text:"Biddable",value:1},{text:"Lexical",value:2}],label:"DomainType",required:""},model:{value:t.shape.domainType,callback:function(e){t.$set(t.shape,"domainType",e)},expression:"shape.domainType"}})],1):t._e()],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.$emit("end-edit-shape")}}},[t._v("Close")])],1)],1)],1):t._e()},kt=[],Lt=(i("e25e"),function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.width="",t.height="",t}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"sizeChange",value:function(){this.shape.inCustomSize=!0,this.shape.width=parseInt(this.width),this.shape.height=parseInt(this.height)}},{key:"displayChange",value:function(){this.shape.inCustomSize=!1,this.shape.flush()}},{key:"haveShortName",get:function(){return this.shape instanceof T||this.shape instanceof O}},{key:"isDomain",get:function(){return this.shape instanceof T}}]),e}(d["c"]));p["a"]([Object(d["b"])()],Lt.prototype,"active",void 0),p["a"]([Object(d["b"])()],Lt.prototype,"shape",void 0),Lt=p["a"]([Object(d["a"])({watch:{active:function(){this.width=this.shape.width,this.height=this.shape.height}}})],Lt);var Ct=Lt,_t=Ct,jt=i("62ad"),Ot=Object(it["a"])(_t,St,kt,!1,null,"17358d29",null),Pt=Ot.exports;at()(Ot,{VBtn:rt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCol:jt["a"],VContainer:lt["a"],VDialog:ct["a"],VRow:ft["a"],VSelect:mt["a"],VSpacer:yt["a"],VTextField:gt["a"]});var Et=function(t){function e(){var t;return Object(h["a"])(this,e),t=Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.newDialog=!1,t.projectDescription="",t.drawerRight=!0,t.pens=[{name:"machine",src:i("223b"),allow:!1},{name:"domain",src:i("dd61"),allow:!1},{name:"requirement",src:i("2c96"),allow:!1},{name:"interface",src:i("a392"),allow:!1},{name:"reference",src:i("27d6"),allow:!1},{name:"constraint",src:i("f4e3"),allow:!1}],t.tmp=2,t.activeStep=1,t.subStep=1,t.activePen=-1,t.canvas=null,t.procedure=null,t.onEditShape=!1,t.editingShape=null,t.onEditLine=!1,t.phenomenons=z.PhenomenonList,t}return Object(v["a"])(e,t),Object(l["a"])(e,[{key:"back",value:function(){var t=this.procedure.previous();this.activeStep=t.step,this.subStep=t.subStep,this.flushAllow()}},{key:"next",value:function(){var t=this.procedure.next();t.err?alert(t.err):(this.activeStep=t.step,this.subStep=t.subStep,t.success.length>0&&alert(t.success),this.flushAllow())}},{key:"deleteElement",value:function(){this.canvas&&this.canvas.deleteElement()}},{key:"merge",value:function(){this.canvas&&this.canvas.merge()}},{key:"editShape",value:function(t){var e=this;this.editingShape=t,this.$nextTick((function(){e.onEditShape=!0}))}},{key:"editLine",value:function(t){this.onEditLine=!0,this.editingLine=t,this.$refs["line-editor"].preSet(t)}},{key:"endEditShape",value:function(){this.onEditShape=!1,this.editingShape.flush()}},{key:"endEditLine",value:function(){this.onEditLine=!1,this.editingLine&&(this.editingLine=void 0)}},{key:"giveWarn",value:function(t){alert(t)}},{key:"flushAllow",value:function(){var t=this;this.procedure.getAllow().forEach((function(e,i){t.pens[i].allow=e}))}},{key:"upload",value:function(){var t=this,e=document.createElement("input");e.setAttribute("id","file"),e.setAttribute("type","file"),e.setAttribute("name","file"),e.click(),e.onchange=function(e){var i=e.target.files,n=new FileReader;n.onload=function(e){var i=JSON.parse(e.target.result);for(var n in t.projectDescription=i.projectName,t.activeStep=i.step,t.subStep=i.subStep,t.canvas=U.load(t,i),t.procedure=new J(t.canvas,i.step,i.subStep),i.ruleSet)J.ruleSet[n]=i.ruleSet[n];t.flushAllow()},n.readAsText(i[0])}}},{key:"download",value:function(){var t={projectName:this.projectName,step:this.activeStep,subStep:this.subStep,componentsCount:this.canvas.componentsCount,machine:this.canvas.machine.toSerializable(),domainList:this.canvas.domainList.map((function(t){return t.toSerializable()})),domainCount:this.canvas.domainCount,requirementList:this.canvas.requirementList.map((function(t){return t.toSerializable()})),requirementCount:this.canvas.requirementCount,interfaceList:this.canvas.interfaceList.map((function(t){return t.toSerializable()})),interfaceCount:this.canvas.interfaceCount,referenceList:this.canvas.referenceList.map((function(t){return t.toSerializable()})),referenceCount:this.canvas.referenceCount,constraintList:this.canvas.constraintList.map((function(t){return t.toSerializable()})),constraintCount:this.canvas.constraintCount,phenomenonList:z.PhenomenonList.map((function(t){return t.toSerializable()})),ruleSet:J.ruleSet},e=JSON.stringify(t),i=URL.createObjectURL(new Blob([e],{type:"text/json"})),n=document.createElement("a");n.setAttribute("href",i),n.setAttribute("download",this.projectName+".json"),n.click()}},{key:"downloadPNG",value:function(){this.canvas.exportImage()}},{key:"newProject",value:function(){U.init(this),this.canvas=new U,this.newDialog=!1,this.procedure=new J(this.canvas),this.flushAllow()}},{key:"projectName",get:function(){return this.projectDescription.length>0?this.projectDescription:"Default"}},{key:"rules",get:function(){return J.ruleSet}},{key:"phenomenonName",get:function(){return["event","state","value"]}},{key:"references",get:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var a,r=this.phenomenons[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var s=a.value;1===s.position&&t.push({name:s.name,description:s.description,initiator:s.initiator.description,receiver:s.receiver.description,constraint:s.constraint})}}catch(o){i=!0,n=o}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}return t}}]),e}(d["c"]);Et=p["a"]([Object(d["a"])({components:{ShapeEditor:Pt,LineEditor:wt},watch:{activePen:function(t){this.canvas.activePen=t}},mounted:function(){},created:function(){var t=this;document.addEventListener("keyup",(function(e){t.onEditMachine||t.onEditDomain||t.onEditRequirement||t.onEditLine||t.onEditShape||"Backspace"!==e.code&&"Delete"!==e.code||t.deleteElement()})),this.$on("edit-shape",this.editShape),this.$on("edit-line",this.editLine),this.$on("giveWarn",this.giveWarn)}})],Et);var It=Et,Dt=It,Nt=i("7496"),Tt=i("40dc"),Vt=i("a75b"),Gt=i("adda"),Rt=i("56b0"),zt=i("1800"),qt=i("5d23"),Mt=i("f774"),At=i("1f4f"),$t=i("b73d"),Bt=i("2a7f"),Yt=Object(it["a"])(Dt,s,o,!1,null,null,null),Ft=Yt.exports;at()(Yt,{VApp:Nt["a"],VAppBar:Tt["a"],VBtn:rt["a"],VCard:st["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VContainer:lt["a"],VContent:Vt["a"],VDialog:ct["a"],VImg:Gt["a"],VList:ut["a"],VListGroup:Rt["a"],VListItem:vt["a"],VListItemAction:zt["a"],VListItemContent:qt["a"],VListItemGroup:pt["a"],VListItemTitle:qt["b"],VMenu:dt["a"],VNavigationDrawer:Mt["a"],VRow:ft["a"],VSimpleTable:At["a"],VSpacer:yt["a"],VSwitch:$t["a"],VTextField:gt["a"],VToolbarTitle:Bt["a"]});var Xt=i("8c4f");r["a"].use(Xt["a"]);var Ht=[],Ut=new Xt["a"]({mode:"history",base:"/",routes:Ht}),Wt=Ut,Jt=i("2f62");r["a"].use(Jt["a"]);var Kt=new Jt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Qt=i("f309");r["a"].use(Qt["a"]);var Zt=new Qt["a"]({});r["a"].config.productionTip=!1,new r["a"]({router:Wt,store:Kt,vuetify:Zt,render:function(t){return t(Ft)}}).$mount("#app")},dd61:function(t,e,i){t.exports=i.p+"img/problem-domain.1f1d8c8e.svg"},f4e3:function(t,e,i){t.exports=i.p+"img/constraint.cfccbcaf.svg"}});